---
import { COLORS, ASSETS_BASE_URL } from '../../../constants';
import SectionHeading from '../../../components/ui/SectionHeading.astro';

interface TeamGroup {
  title: string;
  description: string;
  imageUrl?: string;
}

interface Props {
  groups: readonly TeamGroup[];
  carouselImages?: readonly string[];
}

const { groups = [], carouselImages = [] } = Astro.props;

function getImageUrl(url?: string, fallback: string) {
  return url ?? `${ASSETS_BASE_URL}/images/${fallback}`;
}
---

<section id="our-team" class="py-20" style={{ backgroundColor: COLORS.white }}>
  <div class="container mx-auto px-4 lg:px-8">
    <SectionHeading>Our Team</SectionHeading>

    {carouselImages.length > 0 && (
      <div class="mt-12 overflow-hidden rounded-2xl shadow-md aspect-[21/9]">
        <img
          src={carouselImages[0]}
          alt="Creekside team groups"
          class="w-full h-full object-cover object-center"
          loading="lazy"
          width="1200"
          height="514"
        />
      </div>
    )}

    <div class="mt-16 space-y-20">
      {groups.map((group, i) => {
        const imgSrc = getImageUrl(group.imageUrl, `who-we-are--team-${i}.jpg`);
        const imageLeft = i % 2 === 0;
        return (
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            <div class={imageLeft ? '' : 'lg:order-2'}>
              <div class="w-full max-w-lg overflow-hidden rounded-2xl shadow-md aspect-[4/3] mx-auto">
                <img
                  src={imgSrc}
                  alt={group.title}
                  class="w-full h-full object-cover object-center"
                  loading="lazy"
                  width="600"
                  height="450"
                />
              </div>
            </div>
            <div class={imageLeft ? '' : 'lg:order-1'}>
              <h3 class="text-2xl font-bold mb-4" style={{ color: COLORS.blue.navy }}>{group.title}</h3>
              <p class="text-lg text-gray-600 leading-relaxed">{group.description}</p>
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>
