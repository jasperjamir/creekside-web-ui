---
import { COLORS } from '../../../constants';
import SectionHeading from '../../../components/ui/SectionHeading.astro';

interface Partner {
  name: string;
  href: string;
  image?: { asset?: { url: string }; alt?: string };
}

interface Props {
  title?: string;
  cbiBody?: string;
  partners: readonly Partner[];
}

const { title = '', cbiBody = '', partners = [] } = Astro.props;
const defaultCbiBody =
  'Community-Based Instruction (CBI) is an integral part of the Creekside approach, focusing on real-world application of skills. Through CBI, we support students in building independence and confidence by engaging with their community.';
const bodyText = cbiBody || defaultCbiBody;
---

<section id="community-partnerships" class="py-20" style={{ backgroundColor: COLORS.white }}>
  <div class="container mx-auto px-4 lg:px-8">
    <div class="text-center max-w-3xl mx-auto mb-12">
      <SectionHeading>{title || 'Community Partnerships'}</SectionHeading>
      <h3 class="text-lg text-gray-600 mt-4 leading-relaxed">
        {bodyText}
      </h3>
    </div>

    {partners.length > 0 && (
      <div class="flex flex-wrap justify-center items-center gap-12">
        {partners.filter((p) => p?.image?.asset?.url).map((partner) => {
          const src = partner.image!.asset!.url;
          const alt = partner.name;
          return partner.href ? (
            <a
              href={partner.href}
              target="_blank"
              rel="noopener noreferrer"
              class="group flex items-center justify-center min-h-[80px] min-w-[120px]"
              title={alt}
            >
              <img
                src={src}
                alt={alt}
                class="max-h-16 w-auto max-w-[180px] object-contain opacity-80 grayscale group-hover:opacity-100 group-hover:grayscale-0 transition-all duration-500"
                loading="lazy"
                referrerpolicy="no-referrer"
                width="160"
                height="80"
              />
            </a>
          ) : (
            <div class="group flex items-center justify-center min-h-[80px] min-w-[120px]">
              <img
                src={src}
                alt={alt}
                class="max-h-16 w-auto max-w-[180px] object-contain opacity-80 grayscale group-hover:opacity-100 group-hover:grayscale-0 transition-all duration-500"
                loading="lazy"
                referrerpolicy="no-referrer"
                width="160"
                height="80"
              />
            </div>
          );
        })}
      </div>
    )}
  </div>
</section>
